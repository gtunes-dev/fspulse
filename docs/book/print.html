<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>FsPulse</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">FsPulse</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<img src="https://raw.githubusercontent.com/gtunes-dev/fspulse/main/assets/splash.png" alt="FsPulse logo" style="width: 100%; max-width: 600px;">
<p>FsPulse is a Rust-based command-line tool designed to capture and analyze directory states, detect changes over time, validate file integrity and formats, and query results using a powerful and intuitive query syntax.</p>
<h2 id="key-capabilities"><a class="header" href="#key-capabilities">Key Capabilities</a></h2>
<ul>
<li><strong>Directory Scanning</strong> ‚Äî Track additions, deletions, and modifications of files and directories.</li>
<li><strong>Content Validation</strong> ‚Äî Validate file formats such as FLAC, JPEG, GIF, BMP, PNG, TIFF, and PDF.</li>
<li><strong>MD5 Hashing</strong> ‚Äî Optionally detect file content changes beyond metadata.</li>
<li><strong>Powerful Querying</strong> ‚Äî Access scan results directly with flexible, SQL-like queries.</li>
<li><strong>Interactive Mode</strong> ‚Äî Navigate and explore scan results using a menu-driven shell interface.</li>
</ul>
<p>FsPulse is designed to scale across large file systems while maintaining clarity and control for the user.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from Source</a></h2>
<p>To build FsPulse from source:</p>
<pre><code class="language-sh">git clone https://github.com/gtunes-dev/fspulse.git
cd fspulse
cargo build --release
</code></pre>
<p>You can then run the binary from the <code>target/release</code> directory or move it to a directory included in your system's <code>PATH</code>:</p>
<pre><code class="language-sh">./target/release/fspulse --help
</code></pre>
<h2 id="first-scan"><a class="header" href="#first-scan">First Scan</a></h2>
<p>To scan a directory:</p>
<pre><code class="language-sh">fspulse scan --root-path /some/directory
</code></pre>
<h2 id="interactive-exploration"><a class="header" href="#interactive-exploration">Interactive Exploration</a></h2>
<p>After scanning, you can explore results in an interactive shell:</p>
<pre><code class="language-sh">fspulse interact
</code></pre>
<h2 id="querying"><a class="header" href="#querying">Querying</a></h2>
<p>Use flexible, SQL-like queries to retrieve and filter scan results:</p>
<pre><code class="language-sh"># Items whose path contains 'reports'
fspulse query "items where item_path:('reports')"

# Changes involving items detected as invalid
fspulse query "changes where val_new:(I) show default, val_old, val_new order by change_id desc"
</code></pre>
<p>See the <a href="query.html">Query Syntax</a> page for details.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="scanning"><a class="header" href="#scanning">Scanning</a></h1>
<p>FsPulse scans are at the core of how it tracks changes to the file system over time. A scan creates a snapshot of a root directory and analyzes changes compared to previous scans. This page explains how to initiate scans, how incomplete scans are handled, and the phases involved in each scan.</p>
<hr />
<h2 id="initiating-a-scan"><a class="header" href="#initiating-a-scan">Initiating a Scan</a></h2>
<p>You can start a scan in one of two ways:</p>
<ul>
<li><strong>Command line:</strong>
<pre><code class="language-sh">fspulse scan --root-path /your/path
</code></pre>
</li>
<li><strong>Interactive mode:</strong> From the interactive menu, select <strong>Scan</strong> to re-scan a root path that has previously been scanned.</li>
</ul>
<blockquote>
<p>Interactive mode only supports scanning previously scanned paths. To scan a new root for the first time, use the command line.</p>
</blockquote>
<p>Once a scan on a root has begun, it must complete or be explicitly stopped before another scan on the same root can be started. Scans on other roots can run independently.</p>
<hr />
<h2 id="in-progress-scans"><a class="header" href="#in-progress-scans">In-Progress Scans</a></h2>
<p>FsPulse is designed to be resilient to interruptions like system crashes or power loss. If a scan stops before completing, FsPulse saves its state so it can be resumed later.</p>
<p>To resume or discard an in-progress scan:</p>
<pre><code class="language-sh">fspulse scan --root-path /your/path
</code></pre>
<p>If a scan is in progress, FsPulse will prompt you to:</p>
<ul>
<li><strong>Resume</strong> the scan from where it left off</li>
<li><strong>Stop</strong> the scan and discard its partial results</li>
</ul>
<blockquote>
<p>Stopping a scan reverts the database to its pre-scan state. All detected changes, computed hashes, and validations from that partial scan will be discarded.</p>
</blockquote>
<hr />
<h2 id="phases-of-a-scan"><a class="header" href="#phases-of-a-scan">Phases of a Scan</a></h2>
<p>Each scan proceeds in three main phases:</p>
<h3 id="1-discovery"><a class="header" href="#1-discovery">1. Discovery</a></h3>
<p>The directory tree is deeply traversed. For each file or folder encountered:</p>
<ul>
<li>If not seen before:
<ul>
<li>A new item is created</li>
<li>An <strong>Add</strong> change is recorded</li>
</ul>
</li>
<li>If seen before:
<ul>
<li>FsPulse compares current file system metadata:
<ul>
<li><strong>Modification date</strong> (files and folders)</li>
<li><strong>File size</strong> (files only)</li>
</ul>
</li>
<li>If metadata differs, the item is updated and a <strong>Modify</strong> change is recorded</li>
</ul>
</li>
<li>If the path matches a <strong>tombstoned</strong> item (previously deleted):
<ul>
<li>If type matches (file/folder), the tombstone is reactivated and an <strong>Add</strong> change is created</li>
<li>If type differs, FsPulse creates a new item and new <strong>Add</strong> change</li>
</ul>
</li>
</ul>
<blockquote>
<p>Files and folders are treated as distinct types. A single path that appears as both a file and folder at different times results in two separate items.</p>
</blockquote>
<hr />
<h3 id="2-sweep"><a class="header" href="#2-sweep">2. Sweep</a></h3>
<p>FsPulse identifies items not seen during the current scan:</p>
<ul>
<li>Any item that:
<ul>
<li>Is <strong>not</strong> a tombstone, and</li>
<li>Was <strong>not visited</strong> in the scan</li>
</ul>
</li>
</ul>
<p>...is marked as a <strong>tombstone</strong>, and a <strong>Delete</strong> change is created.</p>
<p>Moved files appear as deletes and adds, as FsPulse does not yet track move operations.</p>
<hr />
<h3 id="3-analysis"><a class="header" href="#3-analysis">3. Analysis</a></h3>
<p>This phase runs only if the scan is started with <code>--hash</code> and/or <code>--validate</code>.</p>
<ul>
<li><strong>Hashing</strong> ‚Äî Computes an MD5 hash of file contents</li>
<li><strong>Validation</strong> ‚Äî Uses file-type-specific validators to check content integrity</li>
</ul>
<p>If either the hash or validation result changes:</p>
<ul>
<li>If an <strong>Add</strong> or <strong>Modify</strong> change already exists, the new data is attached to it</li>
<li>Otherwise, a new <strong>Modify</strong> change is created</li>
</ul>
<p>Each change stores both the <strong>old</strong> and <strong>new</strong> values for comparison.</p>
<hr />
<h2 id="performance-and-threading"><a class="header" href="#performance-and-threading">Performance and Threading</a></h2>
<p>The analysis phase runs in parallel:</p>
<ul>
<li>Default: <strong>8 threads</strong></li>
<li>User-configurable in <a href="configuration.html">Configuration</a></li>
</ul>
<hr />
<h2 id="summary-of-phases"><a class="header" href="#summary-of-phases">Summary of Phases</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Phase</th><th>Purpose</th></tr></thead><tbody>
<tr><td>Discovery</td><td>Finds and records new or modified items</td></tr>
<tr><td>Sweep</td><td>Marks missing items as tombstones and records deletions</td></tr>
<tr><td>Analysis</td><td>Computes hashes/validations and records changes if values differ</td></tr>
</tbody></table>
</div>
<p>Each scan provides a consistent view of the file system at a moment in time and captures important differences across revisions.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>FsPulse supports persistent, user-defined configuration through a file named <code>config.toml</code>. This file allows you to control logging behavior and analysis settings such as thread usage.</p>
<hr />
<h2 id="finding-configtoml"><a class="header" href="#finding-configtoml">Finding <code>config.toml</code></a></h2>
<p>FsPulse uses the <a href="https://docs.rs/directories">directories</a> crate to determine the appropriate location for configuration files based on your operating system.</p>
<h3 id="where-its-stored"><a class="header" href="#where-its-stored">Where it's stored:</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Platform</th><th>Base Location</th><th>Example</th></tr></thead><tbody>
<tr><td>Linux</td><td><code>$HOME</code></td><td><code>/home/alice</code></td></tr>
<tr><td>macOS</td><td><code>$HOME</code></td><td><code>/Users/Alice</code></td></tr>
<tr><td>Windows</td><td><code>{FOLDERID_Profile}</code></td><td><code>C:\Users\Alice</code></td></tr>
</tbody></table>
</div>
<p>On the first run, if no <code>config.toml</code> is found, FsPulse will automatically create one with default settings appropriate for your platform.</p>
<blockquote>
<p>Tip: You can delete <code>config.toml</code> at any time to regenerate it with defaults. Newly introduced settings will not automatically be added to an existing file.</p>
</blockquote>
<hr />
<h2 id="configuration-settings"><a class="header" href="#configuration-settings">Configuration Settings</a></h2>
<p>Here are the current available settings and their default values:</p>
<pre><code class="language-toml">[logging]
fspulse = "info"
lopdf = "error"

[analysis]
threads = 8
</code></pre>
<hr />
<h2 id="logging"><a class="header" href="#logging">Logging</a></h2>
<p>FsPulse uses the Rust <a href="https://docs.rs/log"><code>log</code></a> crate, and so does the PDF validation crate <code>lopdf</code>. You can configure logging levels independently for each subsystem in the <code>[logging]</code> section.</p>
<h3 id="supported-log-levels"><a class="header" href="#supported-log-levels">Supported log levels:</a></h3>
<ul>
<li><code>error</code> ‚Äì only critical errors</li>
<li><code>warn</code> ‚Äì warnings and errors</li>
<li><code>info</code> ‚Äì general status messages (default for FsPulse)</li>
<li><code>debug</code> ‚Äì verbose output for debugging</li>
<li><code>trace</code> ‚Äì extremely detailed logs</li>
</ul>
<h3 id="log-file-behavior"><a class="header" href="#log-file-behavior">Log File Behavior</a></h3>
<ul>
<li>Logs are written to a <code>logs/</code> folder in the same directory as <code>config.toml</code></li>
<li>Each run of FsPulse creates a new log file, named using the current date and time</li>
<li>FsPulse retains up to <strong>100</strong> log files; older files are automatically deleted</li>
</ul>
<hr />
<h2 id="analysis-settings"><a class="header" href="#analysis-settings">Analysis Settings</a></h2>
<p>The <code>[analysis]</code> section controls how many threads are used during the <strong>analysis phase</strong> of scanning (for hashing and validation).</p>
<ul>
<li><code>threads</code>: number of worker threads (default: <code>8</code>)</li>
</ul>
<p>You can adjust this based on your system's CPU count or performance needs.</p>
<hr />
<h2 id="new-settings-and-restoring-defaults"><a class="header" href="#new-settings-and-restoring-defaults">New Settings and Restoring Defaults</a></h2>
<p>FsPulse may expand its configuration options over time. When new settings are introduced, they won't automatically appear in your existing <code>config.toml</code>. To take advantage of new options, either:</p>
<ul>
<li>Manually add new settings to your config file</li>
<li>Delete the file to allow FsPulse to regenerate it with all current defaults</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="query-syntax"><a class="header" href="#query-syntax">Query Syntax</a></h1>
<p>FsPulse provides a flexible, SQL-like query language for exploring scan results. This language supports filtering, custom column selection, ordering, and limiting the number of results.</p>
<hr />
<h2 id="query-structure"><a class="header" href="#query-structure">Query Structure</a></h2>
<p>Each query begins with one of the four supported domains:</p>
<ul>
<li><code>roots</code></li>
<li><code>scans</code></li>
<li><code>items</code></li>
<li><code>changes</code></li>
</ul>
<p>You can then add any of the following optional clauses:</p>
<pre><code class="language-text">DOMAIN [WHERE ...] [SHOW ...] [ORDER BY ...] [LIMIT ...]
</code></pre>
<hr />
<h2 id="column-availability-by-domain"><a class="header" href="#column-availability-by-domain">Column Availability by Domain</a></h2>
<p>The table below shows which columns are available in each domain:</p>
<div class="table-wrapper"><table><thead><tr><th>Property</th><th>Type</th><th style="text-align: center">Roots</th><th style="text-align: center">Scans</th><th style="text-align: center">Items</th><th style="text-align: center">Changes</th></tr></thead><tbody>
<tr><td><code>root_id</code></td><td>Integer</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>scan_id</code></td><td>Integer</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>item_id</code></td><td>Integer</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>change_id</code></td><td>Integer</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>item_path</code></td><td>Path</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>root_path</code></td><td>Path</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>file_size</code></td><td>Integer</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>file_hash</code></td><td>String</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>val</code>, <code>val_old</code>, <code>val_new</code></td><td>Validation Status</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>val_error</code>, <code>val_error_old</code>, <code>val_error_new</code></td><td>String</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>mod_date</code></td><td>Date</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>mod_date_old</code>, <code>mod_date_new</code></td><td>Date</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>hashing</code></td><td>Boolean</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td></tr>
<tr><td><code>validating</code></td><td>Boolean</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td></tr>
<tr><td><code>item_type</code></td><td>Item Type Enum</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>change_type</code></td><td>Change Type Enum</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>meta_change</code></td><td>Boolean</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td></tr>
<tr><td><code>scan_time</code></td><td>Date</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td></tr>
<tr><td><code>adds</code>, <code>modifies</code>, <code>deletes</code></td><td>Integer</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚úì</td><td style="text-align: center">‚Äì</td><td style="text-align: center">‚Äì</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="the-where-clause"><a class="header" href="#the-where-clause">The <code>WHERE</code> Clause</a></h2>
<p>The <code>WHERE</code> clause filters results using one or more conditions, each written as:</p>
<pre><code class="language-text">column_name:(value1, value2, ...)
</code></pre>
<p>Each value must be valid for the column's type:</p>
<ul>
<li><strong>Integer</strong>: numbers, ranges (e.g., <code>1..5</code>)</li>
<li><strong>Date</strong>: <code>YYYY-MM-DD</code>, ranges, <code>null</code>, <code>not null</code></li>
<li><strong>Boolean</strong>: <code>true</code>, <code>false</code>, <code>T</code>, <code>F</code>, <code>null</code>, <code>not null</code></li>
<li><strong>String/Path</strong>: quoted strings</li>
<li><strong>Enums</strong>: e.g., <code>V</code>, <code>I</code>, <code>A</code>, <code>D</code>, <code>M</code> depending on type</li>
</ul>
<hr />
<h2 id="the-show-clause"><a class="header" href="#the-show-clause">The <code>SHOW</code> Clause</a></h2>
<p>Controls which columns are shown and how they‚Äôre formatted. If omitted, a default column set is used.</p>
<p>You may specify:</p>
<ul>
<li>A list of column names</li>
<li>The keyword <code>default</code> to insert the default set</li>
<li>The keyword <code>all</code> to show all available columns</li>
</ul>
<p>Some columns support formatting via <code>@</code> modifiers:</p>
<pre><code class="language-text">item_path@name, mod_date@short
</code></pre>
<h3 id="format-specifiers"><a class="header" href="#format-specifiers">Format Specifiers</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>Format Modes</th></tr></thead><tbody>
<tr><td>Date</td><td><code>full</code>, <code>short</code>, <code>nodisplay</code></td></tr>
<tr><td>Path</td><td><code>full</code>, <code>relative</code>, <code>short</code>, <code>name</code>, <code>nodisplay</code></td></tr>
<tr><td>Validation/Item/Change/Boolean</td><td><code>full</code>, <code>short</code>, <code>nodisplay</code></td></tr>
<tr><td>Integer/String</td><td>(no formatting options)</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="the-order-by-clause"><a class="header" href="#the-order-by-clause">The <code>ORDER BY</code> Clause</a></h2>
<p>Specifies sort order for the results:</p>
<pre><code class="language-text">items order by mod_date desc, item_path asc
</code></pre>
<p>If direction is omitted, <code>ASC</code> is assumed.</p>
<hr />
<h2 id="the-limit-clause"><a class="header" href="#the-limit-clause">The <code>LIMIT</code> Clause</a></h2>
<p>Restricts the number of rows returned:</p>
<pre><code class="language-text">items limit 50
</code></pre>
<hr />
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<pre><code class="language-text"># Items whose path contains 'reports'
items where item_path:('reports')

# Changes involving validation failures
changes where val_new:(I) show default, val_old, val_new order by change_id desc
</code></pre>
<hr />
<p>See also: <a href="interactive_mode.html">Interactive Mode</a> ¬∑ <a href="validators.html">Validators</a> ¬∑ <a href="configuration.html">Configuration</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interactive-mode"><a class="header" href="#interactive-mode">Interactive Mode</a></h1>
<p>FsPulse includes an interactive mode that provides a menu-driven interface for common tasks.</p>
<p><img src="https://raw.githubusercontent.com/gtunes-dev/fspulse/main/assets/interact.png" alt="Interactive menu" /></p>
<p>To launch interactive mode:</p>
<pre><code class="language-sh">fspulse interact
</code></pre>
<hr />
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The interactive menu offers the following options:</p>
<ul>
<li><strong>Scan</strong> ‚Äî Re-scan a previously scanned root</li>
<li><strong>Query</strong> ‚Äî Run custom queries using the query language</li>
<li><strong>Report</strong> ‚Äî View predefined summary reports</li>
<li><strong>Exit</strong> ‚Äî Close interactive mode</li>
</ul>
<hr />
<h2 id="scan"><a class="header" href="#scan">Scan</a></h2>
<p>This option lets you scan a folder that has already been scanned.</p>
<blockquote>
<p>‚ö†Ô∏è You must first perform a scan from the command line using:</p>
</blockquote>
<pre><code class="language-sh">fspulse scan --root-path /your/path
</code></pre>
<p>Once a root has been scanned at least once, it becomes available in the interactive menu.</p>
<p>Interactive scans allow you to toggle:</p>
<ul>
<li><strong>Hashing</strong> ‚Äî compute MD5 file hashes</li>
<li><strong>Validation</strong> ‚Äî check file content integrity for supported types</li>
</ul>
<hr />
<h2 id="query"><a class="header" href="#query">Query</a></h2>
<p>Allows you to enter queries using FsPulse‚Äôs <a href="query.html">query syntax</a>.</p>
<ul>
<li>Use full expressions like:
<pre><code class="language-sh">items where item_path:('photos')
changes where val_new:(I) show default, val_old, val_new
</code></pre>
</li>
<li>Queries may be repeated until you type <code>q</code> or <code>exit</code></li>
<li>Query errors provide detailed syntax feedback</li>
<li>Use the ‚Üë and ‚Üì arrow keys to scroll through previous entries in your session</li>
</ul>
<hr />
<h2 id="report"><a class="header" href="#report">Report</a></h2>
<p>Provides quick access to common predefined reports:</p>
<ul>
<li>List all roots</li>
<li>Show recent scans</li>
<li>Display invalid items</li>
<li>View changes from the latest scan</li>
</ul>
<p>Reports are internally implemented as saved queries and will expand over time.</p>
<hr />
<p>Interactive mode is especially helpful for exploring your data once scans are available, and for learning the query syntax interactively.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="validators"><a class="header" href="#validators">Validators</a></h1>
<p>FsPulse can optionally validate file contents during the <strong>analysis</strong> phase of a scan. To enable validation, pass the <code>--validate</code> flag when initiating a scan.</p>
<pre><code class="language-sh">fspulse scan --root-path /your/path --validate
</code></pre>
<p>Validation allows FsPulse to go beyond basic metadata inspection and attempt to decode the file's contents using format-specific logic. This helps detect corruption or formatting issues in supported file types.</p>
<hr />
<h2 id="validation-status-codes"><a class="header" href="#validation-status-codes">Validation Status Codes</a></h2>
<p>Each item in the database has an associated <strong>validation status</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>Status Code</th><th>Meaning</th></tr></thead><tbody>
<tr><td><code>U</code></td><td><strong>Unknown</strong> ‚Äî item has never been included in a validation scan</td></tr>
<tr><td><code>V</code></td><td><strong>Valid</strong> ‚Äî most recent validation scan found no issues</td></tr>
<tr><td><code>I</code></td><td><strong>Invalid</strong> ‚Äî validation failed; see <code>validation_error</code> field</td></tr>
<tr><td><code>N</code></td><td><strong>No Validator</strong> ‚Äî FsPulse does not currently support this file type</td></tr>
</tbody></table>
</div>
<blockquote>
<p>The <code>validation_error</code> field contains the error message returned by the validator <strong>only if</strong> the item was marked invalid. This field is empty for valid items or items with no validator.</p>
</blockquote>
<p>Note: Some validation "errors" surfaced by the underlying libraries may not indicate corruption, but rather unsupported edge cases or metadata formatting. Always review the error messages before assuming a file is damaged.</p>
<hr />
<h2 id="supported-validators"><a class="header" href="#supported-validators">Supported Validators</a></h2>
<p>FsPulse relies on external Rust crates for performing format-specific validation. We gratefully acknowledge the work of the developers behind these crates for making them available to the Rust community.</p>
<div class="table-wrapper"><table><thead><tr><th>File Types</th><th>Crate</th><th>Link</th></tr></thead><tbody>
<tr><td>FLAC audio (<code>.flac</code>)</td><td><code>claxon</code></td><td><a href="https://github.com/ruuda/claxon">claxon on GitHub</a></td></tr>
<tr><td>Images (<code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.gif</code>, <code>.tiff</code>, <code>.bmp</code>)</td><td><code>image</code></td><td><a href="https://github.com/image-rs/image">image on GitHub</a></td></tr>
<tr><td>PDF documents (<code>.pdf</code>)</td><td><code>lopdf</code></td><td><a href="https://github.com/J-F-Liu/lopdf">lopdf on GitHub</a></td></tr>
</tbody></table>
</div>
<p>Validation support may expand in future versions of FsPulse to cover additional file types such as ZIP archives, audio metadata, or XML/JSON files.</p>
<hr />
<p>$1 See the <a href="query.html">Query Syntax</a> page for full details on query clauses and supported filters.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="concepts"><a class="header" href="#concepts">Concepts</a></h1>
<p>FsPulse is centered around tracking and understanding the state of the file system over time. The core entities in FsPulse ‚Äî roots, scans, items, and changes ‚Äî represent a layered model of this information.</p>
<hr />
<h2 id="root"><a class="header" href="#root">Root</a></h2>
<p>A <strong>root</strong> is the starting point for a scan. It represents a specific path on the file system that you explicitly tell FsPulse to track.</p>
<p>Each root is stored persistently in the database, and every scan you perform refers back to a root.</p>
<ul>
<li>Paths are stored as absolute paths.</li>
<li>Each root has a unique ID.</li>
<li>You can scan a root multiple times over time.</li>
</ul>
<hr />
<h2 id="scan-1"><a class="header" href="#scan-1">Scan</a></h2>
<p>A <strong>scan</strong> is a snapshot of a root directory at a specific point in time.</p>
<p>Each scan records metadata about:</p>
<ul>
<li>The time the scan was performed</li>
<li>Whether hashing and validation were enabled</li>
<li>The collection of items (files and folders) found during the scan</li>
</ul>
<p>Scans are always tied to a root via <code>root_id</code>, and are ordered chronologically by <code>scan_time</code>.</p>
<hr />
<h2 id="item"><a class="header" href="#item">Item</a></h2>
<p>An <strong>item</strong> represents a single file or folder discovered during a scan.</p>
<p>Each item includes metadata such as:</p>
<ul>
<li>Path</li>
<li>Whether it's a file or directory</li>
<li>Last modified date</li>
<li>Size</li>
<li>Optional hash and validation info</li>
</ul>
<p>Items are created when newly seen, and marked with a tombstone (<code>is_ts = true</code>) if they were present in previous scans but no longer exist.</p>
<hr />
<h2 id="change"><a class="header" href="#change">Change</a></h2>
<p>A <strong>change</strong> represents a detected difference in an item between the current scan and a previous one.</p>
<p>Changes may reflect:</p>
<ul>
<li>File additions</li>
<li>File deletions</li>
<li>Metadata or content modifications</li>
</ul>
<p>Each change is associated with both the scan and the item it affects.</p>
<hr />
<h2 id="entity-flow"><a class="header" href="#entity-flow">Entity Flow</a></h2>
<p>A simplified representation of how the entities relate:</p>
<pre><code>Root
 ‚îî‚îÄ‚îÄ Scan (per run)
      ‚îî‚îÄ‚îÄ Item (files and folders)
           ‚îî‚îÄ‚îÄ Change (if the item changed)
</code></pre>
<hr />
<p>These concepts form the foundation of FsPulse‚Äôs scan and query capabilities. Understanding them will help you make the most of both interactive and command-line modes.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="database"><a class="header" href="#database">Database</a></h1>
<p>FsPulse uses an embedded <a href="https://sqlite.org">SQLite</a> database to store all scan-related data. The database schema mirrors the core domain concepts used in FsPulse: roots, scans, items, and changes.</p>
<hr />
<h2 id="database-name-and-location"><a class="header" href="#database-name-and-location">Database Name and Location</a></h2>
<p>The database file is always named:</p>
<pre><code>fspulse.db
</code></pre>
<p>By default, FsPulse stores the database in the root of the user's home directory, as determined by the <a href="https://docs.rs/directories"><code>directories</code></a> crate.</p>
<div class="table-wrapper"><table><thead><tr><th>Platform</th><th>Base Location</th><th>Example</th></tr></thead><tbody>
<tr><td>Linux</td><td><code>$HOME</code></td><td><code>/home/alice</code></td></tr>
<tr><td>macOS</td><td><code>$HOME</code></td><td><code>/Users/Alice</code></td></tr>
<tr><td>Windows</td><td><code>{FOLDERID_Profile}</code></td><td><code>C:\Users\Alice</code></td></tr>
</tbody></table>
</div>
<p>The full path might look like:</p>
<pre><code>/home/alice/fspulse.db
</code></pre>
<hr />
<h2 id="custom-database-path"><a class="header" href="#custom-database-path">Custom Database Path</a></h2>
<p>You can override the default location using the <code>--db-path</code> option:</p>
<pre><code class="language-sh">fspulse --db-path /some/other/folder
</code></pre>
<p>In this case, FsPulse will look for (or create) a file named <code>fspulse.db</code> inside the specified folder. The filename cannot be changed ‚Äî only the directory is configurable.</p>
<hr />
<h2 id="schema-overview"><a class="header" href="#schema-overview">Schema Overview</a></h2>
<p>The database schema is implemented using Rust and reflects the same logical structure used by the query interface:</p>
<ul>
<li><code>roots</code> ‚Äî scanned root directories</li>
<li><code>scans</code> ‚Äî individual scan snapshots</li>
<li><code>items</code> ‚Äî discovered files and folders with metadata</li>
<li><code>changes</code> ‚Äî additions, deletions, and modifications between scans</li>
</ul>
<p>The schema is versioned to allow future upgrades without requiring a full reset.</p>
<hr />
<h2 id="exploring-the-database"><a class="header" href="#exploring-the-database">Exploring the Database</a></h2>
<p>Because FsPulse uses SQLite, you can inspect the database using any compatible tool, such as:</p>
<ul>
<li><a href="https://sqlitebrowser.org">DB Browser for SQLite</a></li>
<li>The <code>sqlite3</code> command-line tool</li>
<li>SQLite integrations in many IDEs and database browsers</li>
</ul>
<blockquote>
<p>‚ö†Ô∏è <strong>Caution:</strong> Making manual changes to the database may affect FsPulse's behavior or stability. Read-only access is recommended.</p>
</blockquote>
<hr />
<p>FsPulse manages all internal data access automatically. Most users will not need to interact with the database directly.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development"><a class="header" href="#development">Development</a></h1>
<p>FsPulse is under active development, with regular improvements being made to both its functionality and documentation.</p>
<p>At this time, FsPulse is <strong>not open for public contribution</strong>. This may change in the future as the project matures and its architecture stabilizes. If you're interested in the project, you're encouraged to:</p>
<ul>
<li>Explore the source code</li>
<li>Open GitHub issues to report bugs or request features</li>
<li>Follow the project for updates</li>
</ul>
<p>Your interest and feedback are appreciated.</p>
<hr />
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>FsPulse is released under the <a href="https://opensource.org/licenses/MIT">MIT License</a>. You are free to use, modify, and distribute the software under the terms of this license.</p>
<hr />
<h2 id="acknowledged-dependencies"><a class="header" href="#acknowledged-dependencies">Acknowledged Dependencies</a></h2>
<p>FsPulse relies on several open source Rust crates. We gratefully acknowledge the work of these maintainers, particularly for enabling file format validation:</p>
<ul>
<li><a href="https://github.com/ruuda/claxon"><code>claxon</code></a> ‚Äî FLAC audio decoding</li>
<li><a href="https://github.com/image-rs/image"><code>image</code></a> ‚Äî image decoding for JPG, PNG, GIF, TIFF, BMP</li>
<li><a href="https://github.com/J-F-Liu/lopdf"><code>lopdf</code></a> ‚Äî PDF parsing and validation</li>
</ul>
<p>Additional dependencies are listed in the project‚Äôs <code>Cargo.toml</code>.</p>
<hr />
<p>If contribution opportunities open in the future, setup instructions and contribution guidelines will be added here.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roadmap"><a class="header" href="#roadmap">Roadmap</a></h1>
<p>FsPulse is an actively evolving project. This roadmap outlines current priorities and areas under consideration for future development. Some features listed here are planned, while others are exploratory.</p>
<hr />
<h2 id="planned-enhancements"><a class="header" href="#planned-enhancements">Planned Enhancements</a></h2>
<p>These areas are actively being developed or prioritized:</p>
<h3 id="-expanded-query-capabilities"><a class="header" href="#-expanded-query-capabilities">üîç Expanded Query Capabilities</a></h3>
<ul>
<li>Support for additional filter types and data expressions</li>
<li>More flexible clause ordering and nesting</li>
<li>Improved error reporting and suggestions</li>
<li>Customizable output formats in the <code>show</code> clause</li>
</ul>
<h3 id="-additional-validators"><a class="header" href="#-additional-validators">üìÇ Additional Validators</a></h3>
<ul>
<li>Add support for additional file types, such as:
<ul>
<li>ZIP and archive formats</li>
<li>Audio metadata (ID3, Vorbis Comments)</li>
<li>Structured text formats (JSON, XML)</li>
</ul>
</li>
<li>Improve clarity of validation errors</li>
</ul>
<hr />
<h2 id="possible-future-directions"><a class="header" href="#possible-future-directions">Possible Future Directions</a></h2>
<h3 id="-reporting-and-output"><a class="header" href="#-reporting-and-output">üìä Reporting and Output</a></h3>
<ul>
<li>Saved or user-defined reports</li>
<li>Aggregated summaries</li>
<li>Export formats: CSV, JSON, GPX</li>
</ul>
<h3 id="-interactive-experience"><a class="header" href="#-interactive-experience">üíª Interactive Experience</a></h3>
<ul>
<li>Query bookmarks or saved history</li>
<li>Persistent history across sessions</li>
<li>Scrollable/full-screen output views</li>
</ul>
<h3 id="-integration--automation"><a class="header" href="#-integration--automation">üåê Integration &amp; Automation</a></h3>
<ul>
<li>JSON export for pipelines and automation</li>
<li>Integration with backup or monitoring systems</li>
<li>CLI-friendly structured output</li>
</ul>
<h3 id="-ui-and-visualization-tools"><a class="header" href="#-ui-and-visualization-tools">üß∞ UI and Visualization Tools</a></h3>
<ul>
<li>Optional terminal-based dashboard (TUI)</li>
<li>Future possibility of a lightweight web viewer</li>
</ul>
<hr />
<h2 id="community-involvement-future"><a class="header" href="#community-involvement-future">Community Involvement (Future)</a></h2>
<p>While FsPulse is not currently accepting contributions, this may change. Potential areas for future help include:</p>
<ul>
<li>Adding validators for more file types</li>
<li>Improving query engine features</li>
<li>Translations and localization</li>
<li>Performance optimization for large-scale scans</li>
</ul>
<hr />
<p>If you have ideas, feature requests, or feedback, please open a GitHub issue ‚Äî community input is welcome.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
